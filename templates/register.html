{% extends "base.html" %}
{% load static %}

{% block title %}Register | iqtisodiybilim.uz{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/register.css' %}">
{% endblock %}

{% block content %}

<section class="auth-wrapper">
    <div class="auth-card">

        <!-- Messages -->
        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="message {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Heading -->
        <h1>Create Account</h1>
        <p class="auth-subtitle">Join <strong>iqtisodiybilim.uz</strong> and start learning economics smartly</p>

        <!-- Registration Form -->
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <!-- Name Row -->
            <div class="form-row name-row">
                <input type="text" name="first_name" placeholder="First name">
                <input type="text" name="last_name" placeholder="Last name">
            </div>

            <!-- Email -->
            <input type="email" name="email" placeholder="Email address">

            <!-- Bio -->
            <textarea name="bio" placeholder="Short bio (optional)"></textarea>

            <!-- Profile Image Upload -->
            <label class="file-upload">
                <input type="file" name="profile_image" accept="image/*">
                Upload profile image
            </label>

            <!-- Passwords -->
            <div class="password-field">
                <input type="password" name="password" id="password" placeholder="Password">
                <span class="toggle-password" data-target="password">ğŸ‘ï¸</span>
            </div>

            <div class="password-field">
                <input type="password" name="repeat_password" id="repeat_password" placeholder="Repeat password">
                <span class="toggle-password" data-target="repeat_password">ğŸ‘ï¸</span>
            </div>


            <!-- Remember me -->
            <div class="form-row remember-me-row">
                <label>
                    <input type="checkbox" name="remember_me"> Remember me
                </label>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn-primary">Create Account</button>
        </form>

        <!-- Footer -->
        <p class="auth-footer">
            Already have an account? <a href="{% url 'login' %}">Login here</a>
        </p>
    </div>
</section>

<!-- Optional: Auto-hide messages after 3 seconds -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const messages = document.querySelectorAll('.message');
        messages.forEach(msg => {
            setTimeout(() => {
                msg.style.transition = 'all 0.5s ease';
                msg.style.opacity = '0';
                msg.style.transform = 'translateY(-10px)';
                setTimeout(() => msg.remove(), 500);
            }, 3000);
        });
    });
    document.addEventListener('DOMContentLoaded', function () {

        // show / hide password
        document.querySelectorAll('.toggle-password').forEach(toggle => {
            toggle.addEventListener('click', function () {
                const targetId = this.getAttribute('data-target');
                const input = document.getElementById(targetId);

                if (!input) return;

                const isPassword = input.type === 'password';
                input.type = isPassword ? 'text' : 'password';
                this.textContent = isPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸';
            });
        });

        // auto-hide messages
        const messages = document.querySelectorAll('.message');
        messages.forEach(msg => {
            setTimeout(() => {
                msg.style.transition = 'all 0.5s ease';
                msg.style.opacity = '0';
                msg.style.transform = 'translateY(-10px)';
                setTimeout(() => msg.remove(), 500);
            }, 3000);
        });
    });

</script>

{% endblock %}