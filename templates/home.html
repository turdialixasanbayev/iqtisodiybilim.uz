{% extends "base.html" %}
{% load static %}

{% block title %}Economics & Insights | iqtisodiybilim.uz{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}

<!-- ================= DJANGO MESSAGES ================= -->
{% if messages %}
<div class="home-messages">
    {% for message in messages %}
    <div class="msg msg-{{ message.tags }}">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- ================= HERO WITH SEARCH ================= -->
<section class="home-hero">

    <div class="hero-overlay"></div>

    <div class="hero-inner">

        <span class="hero-badge">
            Knowledge Platform
        </span>

        <h1>
            Economics explained <br>
            clearly & professionally
        </h1>

        <p>
            Search articles, analysis and insights written by experts.
        </p>

        <form method="get" action="#" class="hero-search">

            <input type="text" name="q" placeholder="Search articles, topics, keywords..." value="{{ request.GET.q }}"
                required>

            <button type="submit">
                Search
            </button>

        </form>

    </div>

</section>


<!-- ================= LATEST ================= -->
<section class="home-section latest-section">

    <div class="section-header center">
        <h2>Latest Insights</h2>
        <p>Fresh and well-researched articles</p>
    </div>

    <div class="latest-list">
        {% for i in latest %}
        <article class="latest-item">

            <div class="latest-content">
                <span class="latest-category">{{ i.category.name }}</span>

                <h3>
                    <a href="{{ i.get_absolute_url }}">{{ i.title }}</a>
                </h3>

                <p>{{ i.description|truncatechars:160 }}</p>

                <div class="latest-meta">
                    <span>{{ i.author.get_full_name }}</span>
                    <span>• {{ i.views }} views</span>
                </div>
            </div>

            <a href="{{ i.get_absolute_url }}" class="latest-image">
                <img src="{{ i.image.url }}" alt="{{ i.title }}">
            </a>

        </article>
        {% endfor %}
    </div>

</section>

<!-- ================= POPULAR ================= -->
<section class="home-section popular-section">

    <div class="section-header">
        <h2>Popular This Week</h2>
    </div>

    <div class="popular-grid">
        {% for p in popular %}
        <article class="popular-item">

            <a href="{{ p.get_absolute_url }}" class="popular-image">
                <img src="{{ p.image.url }}" alt="{{ p.title }}">
                <span class="popular-rank">#{{ forloop.counter }}</span>
            </a>

            <div class="popular-body">
                <h4>
                    <a href="{{ p.get_absolute_url }}">{{ p.title }}</a>
                </h4>

                <span class="popular-meta">
                    {{ p.views }} views · {{ p.category.name }}
                </span>
            </div>

        </article>
        {% endfor %}
    </div>

</section>

{% endblock %}